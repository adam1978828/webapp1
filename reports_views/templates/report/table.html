{% load i18n %}
<form class="grid_12 no-box" name="" method="post" action="" novalidate="novalidate">
    <fieldset>
        <legend>{% trans "Results" %}</legend>
    </fieldset>
    <div class="actions">
        <div class="right">
            <span class="tools pull-right">
                {% if mode == 'new_pattern' %}
                    <a data-url="{% url 'reports_views.views.edit_report_pattern' '' %}" href="{% url 'reports_views.views.save_report_pattern' %}" class="button medium save-pattern"><i class="icon icon-save"></i> {% trans "Save template" %}</a>
                {% endif %}

                {% if mode == 'edit_pattern' %}
                    <a href="{% url 'reports_views.views.save_report_pattern' %}" class="button medium save-existing-pattern"><i class="icon icon-save"></i> {% trans "Save template" %}</a>
                {% endif %}

                {% if mode == 'new_report' %}
                    <a data-url="{% url 'reports_views.views.show_report' '' %}" href="{% url 'reports_views.views.save_report' %}" class="button medium save-report"><i class="icon icon-save"></i> {% trans "Save report" %}</a>
                {% endif %}

                {% if mode == 'show_report' %}
                    <a class="button medium" href="{% url 'reports_views.views.download_report' report_id %}" target="_blank"><i class="icon icon-download"></i> {% trans "Download report" %}</a>
                {% endif %}

                {% if mode == 'new_report' or mode == 'new_pattern' or mode == 'edit_pattern' %}
                    <a href="{% url 'reports_views.views.build_report_pattern' %}" class="button medium build-report"><i class="icon icon-play"></i> {% trans "Build report" %}</a>
                {% endif %}
            </span>
        </div>
    </div>

    <div id="repContent">
        {% if mode != 'show_report' %}
            {% include 'report/report_content.html' %}
        {% else %}
            {% autoescape off %}{{ report_html_content }}{% endautoescape %}
        {% endif %}
    </div>
</form>